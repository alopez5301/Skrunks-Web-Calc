<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>TFR Calibration Guide</title>
  <style>
    /* CSS Variables */
    :root {
      --primary: #1a3c6e;
      --secondary: #e67e22;
      --accent: #2c8c99;
      --warning: #e74c3c;
      --success: #27ae60;
      --background: #ffffff;
      --foreground: #333333;
      --card: #f5f5f5;
      --card-foreground: #333333;
      --border: #e0e0e0;
    }

    .dark {
      --primary: #3b82f6;
      --secondary: #f97316;
      --accent: #06b6d4;
      --warning: #ef4444;
      --success: #10b981;
      --background: #1a1a1a;
      --foreground: #f5f5f5;
      --card: #262626;
      --card-foreground: #f5f5f5;
      --border: #404040;
    }

    /* Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: var(--background);
      color: var(--foreground);
      line-height: 1.6;
      transition: background-color 0.3s, color 0.3s;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      color: var(--primary);
      font-weight: 700;
      margin-bottom: 1rem;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
    }

    h2 {
      font-size: 1.75rem;
      margin-bottom: 1rem;
    }

    h3 {
      font-size: 1.5rem;
      margin-bottom: 0.75rem;
    }

    p {
      margin-bottom: 1rem;
    }

    a {
      color: var(--primary);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* Layout */
    .min-h-screen {
      min-height: 100vh;
    }

    .flex {
      display: flex;
    }

    .flex-col {
      flex-direction: column;
    }

    .flex-row {
      flex-direction: row;
    }

    .flex-1 {
      flex: 1;
    }

    .flex-shrink-0 {
      flex-shrink: 0;
    }

    .items-center {
      align-items: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .gap-8 {
      gap: 2rem;
    }

    .py-4 {
      padding-top: 1rem;
      padding-bottom: 1rem;
    }

    .py-6 {
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }

    .py-8 {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }

    .px-4 {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    .mt-6 {
      margin-top: 1.5rem;
    }

    .mt-12 {
      margin-top: 3rem;
    }

    .mb-4 {
      margin-bottom: 1rem;
    }

    .mb-6 {
      margin-bottom: 1.5rem;
    }

    .mb-8 {
      margin-bottom: 2rem;
    }

    .m-0 {
      margin: 0;
    }

    .text-center {
      text-align: center;
    }

    .text-lg {
      font-size: 1.125rem;
    }

    .text-xl {
      font-size: 1.25rem;
    }

    .text-2xl {
      font-size: 1.5rem;
    }

    .italic {
      font-style: italic;
    }

    /* Components */
    .card {
      background-color: var(--card);
      color: var(--card-foreground);
      border-radius: 0.5rem;
      border: 1px solid var(--border);
      padding: 1.5rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .header {
      position: sticky;
      top: 0;
      z-index: 10;
      background-color: var(--background);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .nav-mobile {
      position: sticky;
      top: 4rem;
      z-index: 10;
      background-color: var(--background);
      border-bottom: 1px solid var(--border);
      padding: 0.5rem 0;
    }

    .nav-select {
      width: 100%;
      padding: 0.5rem;
      border-radius: 0.25rem;
      border: 1px solid var(--border);
      background-color: var(--card);
      color: var(--foreground);
    }

    .sidebar {
      width: 16rem;
    }

    .sidebar-nav {
      position: sticky;
      top: 6rem;
    }

    .nav-button {
      width: 100%;
      text-align: left;
      padding: 0.75rem;
      border-radius: 0.375rem;
      background: none;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-bottom: 0.25rem;
      color: var(--foreground);
    }

    .nav-button:hover {
      background-color: var(--card);
    }

    .nav-button.active {
      background-color: var(--primary);
      color: white;
    }

    .section {
      padding: 2rem 0;
      border-bottom: 1px solid var(--border);
      scroll-margin-top: 6rem;
    }

    .step {
      margin-bottom: 2rem;
    }

    .step-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .step-number {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2rem;
      height: 2rem;
      border-radius: 9999px;
      background-color: var(--primary);
      color: white;
      font-size: 0.875rem;
      flex-shrink: 0;
    }

    .step-content {
      padding-left: 2.75rem;
    }

    .callout {
      padding: 1rem;
      border-radius: 0.375rem;
      margin-bottom: 1rem;
      border-left: 4px solid;
    }

    .callout-tip {
      border-color: var(--accent);
      background-color: rgba(44, 140, 153, 0.1);
    }

    .callout-warning {
      border-color: var(--warning);
      background-color: rgba(231, 76, 60, 0.1);
    }

    .callout-info {
      border-color: var(--primary);
      background-color: rgba(26, 60, 110, 0.1);
    }

    .callout-title {
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .temperature {
      font-family: monospace;
      font-weight: 600;
      color: var(--primary);
    }

    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .checklist-item::before {
      content: "✓";
      color: var(--success);
      font-weight: 700;
      flex-shrink: 0;
    }

    .list-disc {
      list-style-type: disc;
      padding-left: 1.25rem;
    }

    .list-decimal {
      list-style-type: decimal;
      padding-left: 1.25rem;
    }

    .space-y-1 > * + * {
      margin-top: 0.25rem;
    }

    .space-y-2 > * + * {
      margin-top: 0.5rem;
    }

    .space-y-4 > * + * {
      margin-top: 1rem;
    }

    .pl-5 {
      padding-left: 1.25rem;
    }

    .pl-6 {
      padding-left: 1.5rem;
    }

    .theme-toggle {
      padding: 0.5rem;
      border-radius: 9999px;
      background-color: var(--card);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      -webkit-tap-highlight-color: transparent;
    }

    .accordion {
      border: 1px solid var(--border);
      border-radius: 0.375rem;
      margin-bottom: 1rem;
      overflow: hidden;
    }

    .accordion-button {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      text-align: left;
      font-weight: 500;
      background-color: var(--card);
      color: var(--card-foreground);
      border: none;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }

    .accordion-button:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .accordion-content {
      padding: 1rem;
      border-top: 1px solid var(--border);
      background-color: rgba(0, 0, 0, 0.02);
    }

    .footer {
      background-color: var(--card);
      padding: 1.5rem 0;
      border-top: 1px solid var(--border);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }
    }

    @media (min-width: 769px) {
      .nav-mobile {
        display: none;
      }

      .content-wrapper {
        display: flex;
        gap: 2rem;
      }
    }

    /* iOS-specific fixes */
    @supports (-webkit-touch-callout: none) {
      .section {
        scroll-margin-top: 8rem;
      }
    }
  </style>
</head>
<body>
  <div class="min-h-screen">
    <!-- Header -->
    <header class="header">
      <div class="container flex justify-between items-center py-4">
        <h1 class="text-xl m-0">TFR Calibration Guide</h1>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
          <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
          <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
        </button>
      </div>
    </header>

    <!-- Mobile Navigation -->
    <div class="nav-mobile">
      <div class="container">
        <select id="mobile-nav" class="nav-select">
          <option value="why-this-matters">Why This Matters</option>
          <option value="safety-first">Safety First</option>
          <option value="what-youll-need">What You'll Need</option>
          <option value="part-1-getting-ready">Part 1: Getting Ready</option>
          <option value="part-2-taking-your-measurements">Part 2: Taking Your Measurements</option>
          <option value="part-3-creating-your-custom-curve">Part 3: Creating Your Custom Curve</option>
          <option value="pro-tips-troubleshooting">Pro Tips & Troubleshooting</option>
        </select>
      </div>
    </div>

    <div class="container py-8">
      <div class="content-wrapper">
        <!-- Desktop Sidebar Navigation -->
        <aside class="sidebar flex-shrink-0">
          <div class="sidebar-nav">
            <nav>
              <button class="nav-button active" data-target="why-this-matters">Why This Matters</button>
              <button class="nav-button" data-target="safety-first">Safety First</button>
              <button class="nav-button" data-target="what-youll-need">What You'll Need</button>
              <button class="nav-button" data-target="part-1-getting-ready">Part 1: Getting Ready</button>
              <button class="nav-button" data-target="part-2-taking-your-measurements">Part 2: Taking Your Measurements</button>
              <button class="nav-button" data-target="part-3-creating-your-custom-curve">Part 3: Creating Your Custom Curve</button>
              <button class="nav-button" data-target="pro-tips-troubleshooting">Pro Tips & Troubleshooting</button>
            </nav>
          </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1">
          <div class="card mb-8">
            <h1 class="text-center mb-4">Pocket Rocket/v5 Ceramic Dab Cup</h1>
            <h2 class="text-center mb-6">TFR Calibration Guide</h2>
            <p class="text-center text-lg mb-4">Professional Calibration Guide for Precise Temperature Control</p>
            <p class="text-center italic">Written by skrunkle and ohy</p>
          </div>

          <section id="why-this-matters" class="section">
            <h2>1. Why This Matters</h2>
            <p>
              Ever set your mod to <span class="temperature">400°F</span> only to find your concentrate either barely warming up or getting scorched? That's because your device is guessing at temperatures based on generic resistance curves. This guide will help you create a custom Temperature/Resistance curve (TFR) that's dialed in specifically for your ceramic cup, so when you set <span class="temperature">400°F</span>, you actually get <span class="temperature">400°F</span>.
            </p>
            <p>
              Think of it like calibrating a thermometer - we're teaching your mod exactly how your specific cup behaves at different temperatures.
            </p>
            <div class="callout callout-tip">
              <div class="callout-title">BENEFIT:</div>
              <div>Precise temperature control means consistent flavor, vapor production, and efficiency with every session.</div>
            </div>
          </section>

          <section id="safety-first" class="section">
            <h2>2. Safety First</h2>
            <div class="callout callout-warning">
              <div class="callout-title">⚠️ WARNING: HOT SURFACES AHEAD</div>
              <ul class="list-disc space-y-2">
                <li>You'll be working with temperatures up to <span class="temperature">570°F</span>, so keep your fingers clear and work slowly</li>
                <li>Take your time - rushing leads to burns and bad readings</li>
                <li>Let things stabilize - temperature readings need time to settle, especially at higher temps</li>
              </ul>
            </div>
            <div class="callout callout-info">
              <div class="callout-title">REMEMBER:</div>
              <div>Safety is more important than speed. A few extra minutes of patience prevents injuries and ensures accurate calibration.</div>
            </div>
          </section>

          <section id="what-youll-need" class="section">
            <h2>3. What You'll Need</h2>
            <h3>Essential Equipment:</h3>
            <div class="space-y-4">
              <div class="checklist-item">
                A K-type thermocouple or touch-style surface probe
                <ul class="pl-6 mt-2 space-y-1">
                  <li><em>Must be the exposed bead type for quick response</em></li>
                  <li><em>IR temperature guns won't work for this calibration</em></li>
                </ul>
              </div>
              <div class="checklist-item">
                Access to Skrunk's Web Calc
              </div>
              <div class="checklist-item">
                A computer to upload your final curve to your mod
              </div>
              <div class="checklist-item">
                A temperature-controlled mod that supports:
                <ul class="pl-6 mt-2 space-y-1">
                  <li>TCR functionality</li>
                  <li>Autofire capability</li>
                  <li>Custom materials/TFR profiles</li>
                </ul>
              </div>
            </div>
            <div class="callout callout-tip">
              <div class="callout-title">PRO TIP:</div>
              <div>Make sure your probe is the fast-responding type. If it takes more than a few seconds to register temperature changes when you touch it to something warm, it's probably not going to work well for this process.</div>
            </div>
          </section>

          <section id="part-1-getting-ready" class="section">
            <h2>4. Part 1: Getting Ready</h2>
            
            <div class="step">
              <div class="step-header">
                <span class="step-number">1</span>
                <h3>Calibrate Your Temperature Probe</h3>
              </div>
              <div class="step-content">
                <p>
                  Before we start, we need to make sure your probe is giving accurate readings. Touch it to the cup at room temperature (should be around <span class="temperature">70°F/21°C</span>) and see what it reads. If it's off by a few degrees, just make a mental note of the difference - you'll need to account for this throughout the process.
                </p>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">2</span>
                <h3>Set Your Starting TCR</h3>
              </div>
              <div class="step-content">
                <p>
                  If you've already done some basic TCR tuning on your cup, great! If not, start with a reasonable TCR value for ceramic (usually around <code>185-200</code>). Here's the key part: lower your TCR by about <code>10 points</code> from whatever you think is right. This makes your mod run slightly cooler, which helps keep the resistance readings stable and ensures you can actually reach all the temperatures we'll be testing.
                </p>
                <div class="callout callout-info">
                  <div class="callout-title">WHY DO THIS?</div>
                  <div>If your TCR is too high from the start, your mod might not be able to hit the initial low temp.</div>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">3</span>
                <h3>Open Skrunk's Web Calc</h3>
              </div>
              <div class="step-content">
                <p>
                  Head over to <a href="https://alopez5301.github.io/Skrunks-Web-Calc/" target="_blank" rel="noopener noreferrer">Skrunk's Web Calc</a> and get familiar with the interface. This tool will crunch all your temperature and resistance data into a beautiful TFR curve.
                </p>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">4</span>
                <h3>Enable Extrapolation</h3>
              </div>
              <div class="step-content">
                <p>
                  Check the 'Extrapolate to 800' box in the web app. This helps the calculator create a more complete curve even if you don't test all the way up to <span class="temperature">800°F</span>.
                </p>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">5</span>
                <h3>Enter Cold Resistance</h3>
              </div>
              <div class="step-content">
                <p>
                  With your cup at room temperature (around <span class="temperature">70°F/21°C</span>), measure the resistance and enter it in the web app. This is your baseline - everything else will be measured against this starting point.
                </p>
                <div class="callout callout-info">
                  <div class="callout-title">FOR DNA MODS:</div>
                  <div>Enter this as TSM fix mode</div>
                </div>
                <div class="callout callout-info">
                  <div class="callout-title">FOR AF MODS:</div>
                  <div>Enter 7 point curve</div>
                </div>
              </div>
            </div>
          </section>

          <section id="part-2-taking-your-measurements" class="section">
            <h2>5. Part 2: Taking Your Measurements</h2>
            <p class="mb-6">
              Now comes the fun part - we're going to methodically test your cup at different temperatures and record how the resistance changes. Be patient here - good data takes time.
            </p>

            <div class="step">
              <div class="step-header">
                <span class="step-number">6</span>
                <h3>Start with 200°F/100°C</h3>
              </div>
              <div class="step-content">
                <p>
                  Set your mod to <span class="temperature">200°F</span> (or <span class="temperature">100°C</span> if you prefer metric). Hit that autofire and place your probe in the corner of the cup. You'll see the temperature start climbing - this is normal.
                </p>
                <p>
                  Once the temperature stabilizes in the corner, move your probe to the center of the cup and check the reading. You want it within <span class="temperature">1-2°F/C</span> of your target (<span class="temperature">200°F</span>).
                </p>
                <div class="callout callout-info">
                  <div class="callout-title">WHAT YOU'RE LOOKING FOR:</div>
                  <div>The center should read very close to <span class="temperature">200°F</span>. The corner might be slightly different due to heat distribution, but the center is what matters for dabbing.</div>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">7</span>
                <h3>Dial It In</h3>
              </div>
              <div class="step-content">
                <ul class="list-disc pl-5 space-y-2">
                  <li>If the center is too hot: Lower your TCR value slightly (try <code>5-10 points</code>)</li>
                  <li>If the center is too cold: Increase your mod's temperature setting instead of touching the TCR</li>
                </ul>
                <div class="callout callout-warning">
                  <div class="callout-title">IMPORTANT:</div>
                  <div>Only adjust TCR down during this first measurement. We'll handle fine-tuning differently for the higher temperatures.</div>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">8</span>
                <h3>Record Your First Data Point</h3>
              </div>
              <div class="step-content">
                <p>
                  Once your cup center is hitting <span class="temperature">200°F</span> reliably, record the live resistance reading in Skrunk's Web Calc. Congratulations - you've got your first data point!
                </p>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">9</span>
                <h3>Moving Up the Temperature Ladder</h3>
              </div>
              <div class="step-content">
                <p>
                  Time to increase the heat. Move to your next temperature target: <span class="temperature">300°F</span>, then <span class="temperature">400°F</span>, then <span class="temperature">500°F</span>, and finally <span class="temperature">570°F</span>.
                </p>
                <p>For each temperature:</p>
                <ol class="list-decimal pl-5 space-y-2">
                  <li>Set your mod to the target temp</li>
                  <li>Place the probe at the seam between the side and bottom of the cup first (this area heats up predictably)</li>
                  <li>Wait for stabilization - don't rush this part</li>
                  <li>Move to the center to verify the actual temperature</li>
                  <li>Adjust only the mod's temperature setting if needed (not the TCR!)</li>
                </ol>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">10</span>
                <h3>Fine-Tuning Each Temperature</h3>
              </div>
              <div class="step-content">
                <p>For each temperature step:</p>
                <ul class="list-disc pl-5 space-y-2">
                  <li>Too hot in the center? Lower your mod's temperature setting</li>
                  <li>Too cold in the center? Raise your mod's temperature setting</li>
                  <li>Do NOT lower the TCR anymore - we're only adjusting the mod's temperature from here on out</li>
                </ul>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <span class="step-number">11</span>
                <h3>Record Each Data Point</h3>
              </div>
              <div class="step-content">
                <p>
                  Once each temperature is accurate in the center of the cup, record the resistance in the web app. You should end up with clean data points at <span class="temperature">200°F</span>, <span class="temperature">300°F</span>, <span class="temperature">400°F</span>, <span class="temperature">500°F</span>, and <span class="temperature">570°F</span>.
                </p>
                <div class="callout callout-tip">
                  <div class="callout-title">TROUBLESHOOTING TIP:</div>
                  <div>If you're having trouble reaching <span class="temperature">570°F</span> even with your mod set to <span class="temperature">600°F</span>, you can increase the TCR slightly for this final step only. Sometimes you need a little extra push to reach the highest temperatures.</div>
                </div>
              </div>
            </div>
          </section>

          <section id="part-3-creating-your-custom-curve" class="section">
            <h2>6. Part 3: Creating Your Custom Curve</h2>
            
            <h3 class="mb-4">The Magic Happens</h3>
            <p>
              Once you've entered all your resistance values into Skrunk's Web Calc, it will generate a custom TFR curve tailored specifically to your ceramic cup. This curve tells your mod exactly how the resistance should change at every temperature.
            </p>

            <h3 class="mb-4 mt-6">Installing Your Curve</h3>
            <p>
              Upload this curve to your compatible firmware, or use the data to manually dial in your temperature settings. The exact process depends on your specific mod and firmware.
            </p>
            <div class="callout callout-info">
              <div class="callout-title">FOR AF USERS:</div>
              <div>Your 7-point curve can be imported directly into NFE tools via materials section.</div>
            </div>
            <div class="callout callout-info">
              <div class="callout-title">FOR DNA USERS:</div>
              <div>Your 8-point tsm fix curve can be imported directly into Device Monitor or uploaded via EScribe.</div>
            </div>
          </section>

          <section id="pro-tips-troubleshooting" class="section">
            <h2>7. Pro Tips & Troubleshooting</h2>
            
            <div class="accordion">
              <button class="accordion-button" data-accordion="readings">
                <span>If your readings seem inconsistent</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
              </button>
              <div class="accordion-content" id="readings-content" style="display: none;">
                <ul class="list-disc pl-5 space-y-2">
                  <li>Make sure your probe is making good contact with the cup surface</li>
                  <li>Check that your cup is properly seated and making good electrical contact</li>
                  <li>Verify your room temperature baseline hasn't shifted</li>
                </ul>
              </div>
            </div>

            <div class="accordion">
              <button class="accordion-button" data-accordion="temperatures">
                <span>If you can't reach higher temperatures</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
              </button>
              <div class="accordion-content" id="temperatures-content" style="display: none;">
                <ul class="list-disc pl-5 space-y-2">
                  <li>Your initial TCR might have been too low - try bumping it up slightly</li>
                  <li>Make sure your mod's wattage limit isn't capping your power</li>
                  <li>Check that your battery is well-charged</li>
                </ul>
              </div>
            </div>

            <div class="accordion">
              <button class="accordion-button" data-accordion="drift">
                <span>If temperatures seem to drift</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
              </button>
              <div class="accordion-content" id="drift-content" style="display: none;">
                <ul class="list-disc pl-5 space-y-2">
                  <li>Give each temperature more time to stabilize before taking readings</li>
                  <li>Make sure you're not accidentally moving or jostling the setup</li>
                  <li>Consider that some drift is normal as components heat-soak</li>
                </ul>
              </div>
            </div>

            <div class="callout callout-info mt-6">
              <div class="callout-title">REMEMBER:</div>
              <div>This process might take 15-20 minutes the first time you do it. That's totally normal! The payoff is having a perfectly calibrated setup that hits your target temperatures every single time.</div>
            </div>

            <p class="mt-6">
              Once you're done, you'll have a custom TFR curve that makes your Pocket Rocket perform exactly how you want it to. No more guessing, no more burnt concentrates, just consistent, reliable temperature control.
            </p>
          </section>
        </main>
      </div>
    </div>

    <footer class="footer mt-12">
      <div class="container text-center">
        <p>Pocket Rocket/v5 Ceramic Dab Cup - TFR Calibration Guide | Written by skrunkle and ohy</p>
      </div>
    </footer>
  </div>

  <script>
    // Theme Toggle - iOS Compatible
    const themeToggle = document.getElementById('theme-toggle');
    const moonIcon = document.getElementById('moon-icon');
    const sunIcon = document.getElementById('sun-icon');
    
    // Check for saved theme preference or use system preference
    function setThemeFromPreference() {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        document.documentElement.classList.add('dark');
        moonIcon.style.display = 'none';
        sunIcon.style.display = 'block';
      } else {
        document.documentElement.classList.remove('dark');
        moonIcon.style.display = 'block';
        sunIcon.style.display = 'none';
      }
    }
    
    // Initial theme setup
    setThemeFromPreference();
    
    // Toggle theme with iOS compatibility
    themeToggle.addEventListener('click', function() {
      const isDark = document.documentElement.classList.contains('dark');
      
      if (isDark) {
        document.documentElement.classList.remove('dark');
        localStorage.setItem('theme', 'light');
        moonIcon.style.display = 'block';
        sunIcon.style.display = 'none';
      } else {
        document.documentElement.classList.add('dark');
        localStorage.setItem('theme', 'dark');
        moonIcon.style.display = 'none';
        sunIcon.style.display = 'block';
      }
    });
    
    // iOS-compatible smooth scrolling
    function smoothScrollTo(elementId) {
      const element = document.getElementById(elementId);
      if (!element) return;
      
      // For iOS compatibility
      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      
      if (isIOS) {
        // iOS needs a small delay for reliable scrolling
        setTimeout(() => {
          window.scrollTo({
            top: element.offsetTop - 100,
            behavior: 'smooth'
          });
        }, 100);
      } else {
        window.scrollTo({
          top: element.offsetTop - 100,
          behavior: 'smooth'
        });
      }
    }
    
    // Navigation
    const navButtons = document.querySelectorAll('.nav-button');
    const mobileNav = document.getElementById('mobile-nav');
    
    function updateActiveNavState(id) {
      navButtons.forEach(button => {
        if (button.dataset.target === id) {
          button.classList.add('active');
        } else {
          button.classList.remove('active');
        }
      });
      
      mobileNav.value = id;
    }
    
    navButtons.forEach(button => {
      button.addEventListener('click', () => {
        const targetId = button.dataset.target;
        smoothScrollTo(targetId);
        updateActiveNavState(targetId);
      });
    });
    
    mobileNav.addEventListener('change', () => {
      const targetId = mobileNav.value;
      smoothScrollTo(targetId);
      updateActiveNavState(targetId);
    });
    
    // Accordions
    const accordionButtons = document.querySelectorAll('.accordion-button');
    
    accordionButtons.forEach(button => {
      button.addEventListener('click', () => {
        const accordionId = button.dataset.accordion;
        const content = document.getElementById(`${accordionId}-content`);
        
        if (content.style.display === 'none') {
          content.style.display = 'block';
          button.querySelector('.accordion-icon').innerHTML = '<polyline points="18 15 12 9 6 15"></polyline>';
        } else {
          content.style.display = 'none';
          button.querySelector('.accordion-icon').innerHTML = '<polyline points="6 9 12 15 18 9"></polyline>';
        }
      });
    });
    
    // Scroll spy for navigation - with iOS compatibility
    function debounce(func, wait) {
      let timeout;
      return function() {
        const context = this;
        const args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), wait);
      };
    }
    
    const handleScroll = debounce(function() {
      const sections = document.querySelectorAll('section');
      let currentSection = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 150;
        const sectionHeight = section.clientHeight;
        if (window.pageYOffset >= sectionTop && window.pageYOffset < sectionTop + sectionHeight) {
          currentSection = section.id;
        }
      });
      
      if (currentSection) {
        updateActiveNavState(currentSection);
      }
    }, 100);
    
    window.addEventListener('scroll', handleScroll);
    
    // Initial scroll position check
    setTimeout(handleScroll, 500);
  </script>
</body>
</html>
